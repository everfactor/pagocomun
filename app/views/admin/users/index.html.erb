<div class="mx-auto max-w-7xl">
  <div class="mb-8 flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">Users</h1>
      <p class="mt-2 text-sm text-gray-600">Manage all users</p>
    </div>
    <%= link_to "New User", new_admin_user_path, class: "rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500" %>
  </div>
  <div class="mb-6 rounded-lg bg-gray-50 p-6 ring-1 ring-inset ring-gray-200">
    <%= form_with url: admin_users_path, method: :get, class: "space-y-4" do |f| %>
      <div class="grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-2 lg:grid-cols-5">
        <div>
          <%= f.label :name, class: "block text-sm font-medium leading-6 text-gray-900" %>
          <div class="mt-2">
            <%= f.text_field :name, value: params[:name], placeholder: "Name", class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm" %>
          </div>
        </div>
        <div>
          <%= f.label :email, class: "block text-sm font-medium leading-6 text-gray-900" %>
          <div class="mt-2">
            <%= f.text_field :email, value: params[:email], placeholder: "Email", class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm" %>
          </div>
        </div>
        <div>
          <%= f.label :domain, class: "block text-sm font-medium leading-6 text-gray-900" %>
          <div class="mt-2">
            <%= f.text_field :domain, value: params[:domain], placeholder: "example.com", class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm" %>
          </div>
        </div>
        <div>
          <%= f.label :organization_id, "Organization", class: "block text-sm font-medium leading-6 text-gray-900" %>
          <div class="mt-2">
            <%= f.collection_select :organization_id, Organization.all, :id, :name, { include_blank: "All Organizations", selected: params[:organization_id] }, { class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm" } %>
          </div>
        </div>
        <div>
          <%= f.label :status, class: "block text-sm font-medium leading-6 text-gray-900" %>
          <div class="mt-2">
            <%= f.select :status, User.statuses.keys.map { |s| [s.titleize, s] }, { include_blank: "All Statuses", selected: params[:status] }, { class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm" } %>
          </div>
        </div>
      </div>
      <div class="flex items-center justify-end gap-x-3 pt-2">
        <%= link_to "Clear", admin_users_path, class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
        <%= f.submit "Filter", class: "rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600" %>
      </div>
    <% end %>
  </div>
  <div class="overflow-hidden rounded-lg bg-white shadow">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Email</th>
            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Role</th>
            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Status</th>
            <th class="px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500">Actions</th>
          </tr>
        </thead>
        <tbody id="users" class="bg-white divide-y divide-gray-200">
          <% if @users.any? %>
            <%= render @users %>
          <% else %>
            <tr>
              <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">No users found</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
